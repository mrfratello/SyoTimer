/**
 * SyoTimer v.3.0.0 | under MIT license
 * https://mrfratello.github.io/SyoTimer
 */
!function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(jQuery);n.default.syotimerLang={rus:{second:["секунда","секунды","секунд"],minute:["минута","минуты","минут"],hour:["час","часа","часов"],day:["день","дня","дней"],handler:function(e,t){return e%100>4&&e%100<20?t[2]:t[[2,0,1,1,1,2][e%10<5?e%10:5]]}},eng:{second:["second","seconds"],minute:["minute","minutes"],hour:["hour","hours"],day:["day","days"]},por:{second:["segundo","segundos"],minute:["minuto","minutos"],hour:["hora","horas"],day:["dia","dias"]},spa:{second:["segundo","segundos"],minute:["minuto","minutos"],hour:["hora","horas"],day:["día","días"]},heb:{second:["שניה","שניות"],minute:["דקה","דקות"],hour:["שעה","שעות"],day:["יום","ימים"]}};var i="day",a="hour",o="minute",r="second",s={d:i,h:a,m:o,s:r},d={list:[r,o,a,i],next:function(e){var t=this.list.indexOf(e);return t<this.list.length?this.list[t+1]:null},prev:function(e){var t=this.list.indexOf(e);return t>0?this.list[t-1]:null}},l={second:!1,minute:!1,hour:!1,day:!1},u={date:0,layout:"dhms",periodic:!1,periodInterval:7,periodUnit:"d",doubleNumbers:!0,effectType:"none",lang:"eng",headTitle:"",footTitle:"",afterDeadline:function(e){e.bodyBlock.html('<p style="font-size: 1.2em;">The countdown is finished!</p>')},itemTypes:["day","hour","minute","second"],itemsHas:n.default.extend({},l)};function c(e){switch(e){case"d":case i:return 86400;case"h":case a:return 3600;case"m":case o:return 60;case"s":case r:default:return 1}}var m=function(e,t){return 1===e?t[0]:t[1]};function h(e,t,n){return($.syotimerLang[t].handler||m)(e,$.syotimerLang[t][n])}function f(e,t){var i=n.default.extend({},u,t||{});i.itemTypes=function(e){for(var t=[],n=0;n<e.length;n++)t.push(s[e[n]]);return t}(i.layout),i.itemsHas=n.default.extend({},l);for(var a=0;a<i.itemTypes.length;a++)i.itemsHas[i.itemTypes[a]]=!0;return e.each((function(){new y(this,i)}))}var y=function(){function e(e,t){this.element=n.default(e),this.element.data("syotimer-options",t),this.render(),this.perSecondHandler()}return e.prototype.render=function(){for(var e,t,i,a=this.element.data("syotimer-options"),o=(e=$("<div/>",{class:"syotimer-cell__value",text:"0"}),t=$("<div/>",{class:"syotimer-cell__unit"}),(i=$("<div/>",{class:"syotimer-cell"})).append(e).append(t),i),r=n.default("<div/>",{class:"syotimer__head"}).html(a.headTitle),s=n.default("<div/>",{class:"syotimer__body"}),d=n.default("<div/>",{class:"syotimer__footer"}).html(a.footTitle),l={},u=0;u<a.itemTypes.length;u++){var c=o.clone();c.addClass("syotimer-cell_type_"+a.itemTypes[u]),s.append(c),l[a.itemTypes[u]]=c}var m={headBlock:r,bodyBlock:s,footBlock:d};this.element.data("syotimer-blocks",m).data("syotimer-items",l).addClass("syotimer").append(r).append(s).append(d)},e.prototype.perSecondHandler=function(){var e=this.element.data("syotimer-options");n.default(".syotimer-cell > .syotimer-cell__value",this.element).css("opacity",1);var t=(new Date).getTime(),i=function(e,t){var n,i=e/1e3;if(i=Math.floor(i),!t.periodic)return i;var a=c(t.periodUnit),o=e/(1e3*a);o=Math.ceil(o),o=Math.abs(o),i>=0?(n=0==(n=o%t.periodInterval)?t.periodInterval:n,n-=1):n=t.periodInterval-o%t.periodInterval;var r=i%a;return 0===r&&i<0&&n--,Math.abs(n*a+r)}((e.date instanceof Date?e.date.getTime():e.date)-t,e);if(i>=0)this.refreshUnitsDom(i),this.applyEffectSwitch(e.effectType);else{var a=n.default.extend(this.element,this.element.data("syotimer-blocks"));e.afterDeadline(a)}},e.prototype.refreshUnitsDom=function(e){var t,a,o=this.element.data("syotimer-options"),r=this.element.data("syotimer-items"),s=o.itemTypes,l=function(e){var t=e,n=i,a={day:0,hour:0,minute:0,second:0};do{var o=c(n);a[n]=Math.floor(t/o),t%=o}while(n=d.prev(n));return a}(e);o.itemsHas.day||(l.hour+=24*l.day),o.itemsHas.hour||(l.minute+=60*l.hour),o.itemsHas.minute||(l.second+=60*l.minute);for(var u=0;u<s.length;u++){var m=s[u],f=l[m],y=r[m];y.data("syotimer-unit-value",f),n.default(".syotimer-cell__value",y).html((t=f,a=m!==i&&o.doubleNumbers,t<=9&&a?"0"+t:""+t)),n.default(".syotimer-cell__unit",y).html(h(f,o.lang,m))}},e.prototype.applyEffectSwitch=function(e,t){var i=this;switch(void 0===t&&(t=r),e){case"opacity":var a=this.element.data("syotimer-items")[t];if(a){var o=d.next(t),s=a.data("syotimer-unit-value");n.default(".syotimer-cell__value",a).animate({opacity:.1},1e3,"linear",(function(){return i.perSecondHandler()})),o&&0===s&&this.applyEffectSwitch(e,o)}return;case"none":default:setTimeout((function(){return i.perSecondHandler()}),1e3)}},e}(),p={setOption:function(e,t){var i=n.default(this),a=i.data("syotimer-options");a.hasOwnProperty(e)&&(a[e]=t,i.data("syotimer-options",a))}};n.default.fn.extend({syotimer:function(e){if("string"==typeof e&&"setOption"===e){var t=Array.prototype.slice.call(arguments,1);return this.each((function(){p[e].apply(this,t)}))}if(null==e||"object"==typeof e)return f(this,e);n.default.error("SyoTimer. Error in call methods: methods is not exist")}})}();
//# sourceMappingURL=jquery.syotimer.min.js.map
