/**
 * SyoTimer v.2.1.3 | under MIT license
 * http://syomochkin.xyz/folio/syotimer/demo.html
 */
!function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=t(e);i.default.syotimerLang={rus:{second:["секунда","секунды","секунд"],minute:["минута","минуты","минут"],hour:["час","часа","часов"],day:["день","дня","дней"],handler:"rusNumeral"},eng:{second:["second","seconds"],minute:["minute","minutes"],hour:["hour","hours"],day:["day","days"]},por:{second:["segundo","segundos"],minute:["minuto","minutos"],hour:["hora","horas"],day:["dia","dias"]},spa:{second:["segundo","segundos"],minute:["minuto","minutos"],hour:["hora","horas"],day:["día","días"]},heb:{second:["שניה","שניות"],minute:["דקה","דקות"],hour:["שעה","שעות"],day:["יום","ימים"]},universal:function(e){return 1===e?0:1},rusNumeral:function(e){return e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]},getNumeral:function(e,t,n){var a=this[i.default.syotimerLang[t].handler||"universal"](e);return i.default.syotimerLang[t][n][a]}};var n="day",a="hour",o="minute",r="second",s={d:n,h:a,m:o,s:r},d={list:[r,o,a,n],next:function(e){var t=this.list.indexOf(e);return t<this.list.length&&this.list[t+1]},prev:function(e){var t=this.list.indexOf(e);return t>0&&this.list[t-1]}},l={year:2034,month:7,day:31,hour:0,minute:0,second:0,timeZone:"local",ignoreTransferTime:!1,layout:"dhms",periodic:!1,periodInterval:7,periodUnit:"d",doubleNumbers:!0,effectType:"none",lang:"eng",headTitle:"",footTitle:"",afterDeadline:function(e){e.bodyBlock.html('<p style="font-size: 1.2em;">The countdown is finished!</p>')}},u={second:!1,minute:!1,hour:!1,day:!1},m={init:function(e){var t=i.default.extend({},l,e||{});t.itemTypes=f.getItemTypesByLayout(t.layout),t._itemsHas=i.default.extend({},u);for(var n=0;n<t.itemTypes.length;n++)t._itemsHas[t.itemTypes[n]]=!0;return this.each((function(){i.default(this).data("syotimer-options",t),m._render.apply(this,[]),m._perSecondHandler.apply(this,[])}))},_render:function(){for(var e=i.default(this),t=e.data("syotimer-options"),n=f.getTimerItem(),a=i.default("<div/>",{class:"syotimer__head"}).html(t.headTitle),o=i.default("<div/>",{class:"syotimer__body"}),r=i.default("<div/>",{class:"syotimer__footer"}).html(t.footTitle),s={},d=0;d<t.itemTypes.length;d++){var l=n.clone();l.addClass("syotimer-cell_type_"+t.itemTypes[d]),o.append(l),s[t.itemTypes[d]]=l}var u={headBlock:a,bodyBlock:o,footBlock:r};e.data("syotimer-blocks",u).data("syotimer-items",s).addClass("syotimer").append(a).append(o).append(r)},_perSecondHandler:function(){var e=i.default(this),t=e.data("syotimer-options");i.default(".syotimer-cell > .syotimer-cell__value",e).css("opacity",1);var n=new Date,a=new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second),o=f.getDifferenceWithTimezone(n,a,t),r=f.getSecondsToDeadLine(o,t);r>=0?(m._refreshUnitsDom.apply(this,[r]),m._applyEffectSwitch.apply(this,[t.effectType])):(e=i.default.extend(e,e.data("syotimer-blocks")),t.afterDeadline(e))},_refreshUnitsDom:function(e){var t=i.default(this),a=t.data("syotimer-options"),o=t.data("syotimer-items"),r=a.itemTypes,s=f.getUnitsToDeadLine(e);a._itemsHas.day||(s.hour+=24*s.day),a._itemsHas.hour||(s.minute+=60*s.hour),a._itemsHas.minute||(s.second+=60*s.minute);for(var d=0;d<r.length;d++){var l=r[d],u=s[l],m=o[l];m.data("syotimer-unit-value",u),i.default(".syotimer-cell__value",m).html(f.format2(u,l!==n&&a.doubleNumbers)),i.default(".syotimer-cell__unit",m).html(i.default.syotimerLang.getNumeral(u,a.lang,l))}},_applyEffectSwitch:function(e,t){t=t||r;var n=this,a=i.default(n);if("none"===e)setTimeout((function(){m._perSecondHandler.apply(n,[])}),1e3);else if("opacity"===e){var o=a.data("syotimer-items")[t];if(o){var s=d.next(t),l=o.data("syotimer-unit-value");i.default(".syotimer-cell__value",o).animate({opacity:.1},1e3,"linear",(function(){m._perSecondHandler.apply(n,[])})),s&&0===l&&m._applyEffectSwitch.apply(n,[e,s])}}}},f={getTimerItem:function(){var e=i.default("<div/>",{class:"syotimer-cell__value",text:"0"}),t=i.default("<div/>",{class:"syotimer-cell__unit"}),n=i.default("<div/>",{class:"syotimer-cell"});return n.append(e).append(t),n},getItemTypesByLayout:function(e){for(var t=[],i=0;i<e.length;i++)t.push(s[e[i]]);return t},getSecondsToDeadLine:function(e,t){var i,n=e/1e3;if(n=Math.floor(n),t.periodic){var a,o,r=f.getPeriodUnit(t.periodUnit),s=e/(1e3*r);s=Math.ceil(s),s=Math.abs(s),n>=0?(o=0===(o=s%t.periodInterval)?t.periodInterval:o,o-=1):o=t.periodInterval-s%t.periodInterval,0===(a=n%r)&&n<0&&o--,i=Math.abs(o*r+a)}else i=n;return i},getUnitsToDeadLine:function(e){var t=n,i={};do{var a=f.getPeriodUnit(t);i[t]=Math.floor(e/a),e%=a}while(t=d.prev(t));return i},getPeriodUnit:function(e){switch(e){case"d":case n:return 86400;case"h":case a:return 3600;case"m":case o:return 60;case"s":case r:return 1}},getDifferenceWithTimezone:function(e,t,i){var n=t.getTime()-e.getTime(),r=0,s=0;"local"!==i.timeZone&&(r=1e3*(parseFloat(i.timeZone)*f.getPeriodUnit(a)- -e.getTimezoneOffset()*f.getPeriodUnit(o)));i.ignoreTransferTime&&(s=1e3*(-e.getTimezoneOffset()*f.getPeriodUnit(o)- -t.getTimezoneOffset()*f.getPeriodUnit(o)));return n-(r+s)},format2:function(e,t){return t=!1!==t,e<=9&&t?"0"+e:""+e}},c={setOption:function(e,t){var n=i.default(this),a=n.data("syotimer-options");a.hasOwnProperty(e)&&(a[e]=t,n.data("syotimer-options",a))}};i.default.fn.syotimer=function(e){if("string"==typeof e&&"setOption"===e){var t=Array.prototype.slice.call(arguments,1);return this.each((function(){c[e].apply(this,t)}))}if(null==e||"object"==typeof e)return m.init.apply(this,[e]);i.default.error("SyoTimer. Error in call methods: methods is not exist")}}($);
//# sourceMappingURL=jquery.syotimer.min.js.map
